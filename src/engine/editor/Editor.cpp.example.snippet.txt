// Inside void Editor::Run()
while (!glfwWindowShouldClose(m_window)) {
    bool ui_frame_begun = false; // ensure defined every frame

    glfwPollEvents();
    if (!std::getenv("NOVA_DISABLE_IMGUI")) {
        ImGui_ImplGlfw_NewFrame();
        if (ImGui::GetIO().BackendRendererUserData) {
            ImGui_ImplVulkan_NewFrame();
            ImGui::NewFrame();
            ui_frame_begun = true;
        }
    }

    if (ui_frame_begun) {
        DrawDockspace();
        DrawConsole();
        ai::DrawAICommandPalette(*this);
    }

    VkCommandBuffer cmd = renderer.BeginFrame();
    if (ui_frame_begun) {
        ImGui::Render();
        ImGui_ImplVulkan_RenderDrawData(ImGui::GetDrawData(), cmd);
    }
    renderer.EndFrame();
}
